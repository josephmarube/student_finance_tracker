<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Fintrack — Unit Tests</title>
    <style>
        body {font-family: monospace;padding: 2rem;background: #0e0d0a;color: #e8e5dd;}
        h1 {color: #a5b4fc; margin-bottom: 1.5rem;font-size: 1.3rem;}
        h2 {color: #fbbf24;font-size: .95rem;margin: 1.25rem 0 .4rem;}
        li {list-style: none;padding: .18rem 0;font-size: .875rem;}
        .pass {color: #34d399;}
        .fail {color: #f87171;}
        .suite {margin-bottom: 1rem;}
        #summary {margin-top: 1.5rem;color: #a5b4fc;font-weight: bold;font-size: 1rem;}
    </style>
</head>

<body>
    <h1>◈ Fintrack — Unit Tests</h1>
    <div id="out"></div>
    <div id="summary"></div>

    <script type="module">
        import { duplicateWordRegex, validateAll } from './scripts/validators.js';        

        const results = [];
        function test(suite, label, fn) {
            try { fn(); results.push({ suite, label, pass: true }); }
            catch (e) { results.push({ suite, label, pass: false, err: e.message }); }
        }
        function assert(val, msg) { if (!val) throw new Error(msg || 'Assertion failed'); }
        function assertEq(a, b) { if (a !== b) throw new Error(`Expected ${b}, got ${a}`); }

        //duplicateWordRegex  
        test('Regex', 'no match: "Lunch at cafe"', () => assert(!duplicateWordRegex.test('Lunch at cafe')));
        test('Regex', 'match: "coffee coffee"', () => assert(duplicateWordRegex.test('coffee coffee')));
        test('Regex', 'match: "the The" (case-insens)', () => assert(duplicateWordRegex.test('the The')));
        test('Regex', 'no match: "Bus Pass"', () => assert(!duplicateWordRegex.test('Bus Pass')));
        test('Regex', 'no match: "Netflix Subscription"', () => assert(!duplicateWordRegex.test('Netflix Subscription')));

        //Amount pattern  
        const amtRe = /^(0|[1-9]\d*)(\.\d{1,2})?$/;
        test('Amount', '"12.50" valid', () => assert(amtRe.test('12.50')));
        test('Amount', '"0" valid', () => assert(amtRe.test('0')));
        test('Amount', '"1200" valid', () => assert(amtRe.test('1200')));
        test('Amount', '"12.999" invalid', () => assert(!amtRe.test('12.999')));
        test('Amount', '".50" invalid', () => assert(!amtRe.test('.50')));
        test('Amount', '"abc" invalid', () => assert(!amtRe.test('abc')));
        test('Amount', '"-5" invalid', () => assert(!amtRe.test('-5')));

        //Date pattern  
        const dateRe = /^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/;
        test('Date', '"2026-02-10" valid', () => assert(dateRe.test('2026-02-10')));
        test('Date', '"2026-13-01" invalid', () => assert(!dateRe.test('2026-13-01')));
        test('Date', '"26-02-10" invalid', () => assert(!dateRe.test('26-02-10')));

        //Category pattern  
        const catRe = /^[A-Za-z]+(?:[ -][A-Za-z]+)*$/;
        test('Category', '"Food" valid', () => assert(catRe.test('Food')));
        test('Category', '"Health-Care" valid', () => assert(catRe.test('Health-Care')));
        test('Category', '"Food2" invalid', () => assert(!catRe.test('Food2')));
        test('Category', 'empty invalid', () => assert(!catRe.test('')));

    </script>
</body>

</html>